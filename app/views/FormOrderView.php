<?phpnamespace RMS\Views;class FormOrderView{   static function content($id,$name,$price,$saleprice,$commission,$goto,$submit,$success,$style,$infusion_tags,$meta_data,$show_,$require_,$comission_earning){        ob_start();                $show_check=explode(';',$show_);        $required_check=explode(';',$require_);       ?>       <style>           <?php  echo get_option('rms_css'); ?>       </style>       <link rel="stylesheet" id="style-css" href="<?php echo RMS_URL.'/assets/css/'.$style.'.css' ?>" type="text/css" media="all">            <div class="block_price login-rms">                <form action="" method="post" class="form_price_rms">                    <div style="display:none" class="notification_popup"><?php echo $success ?></div>                    <input type="hidden" class="goto" name="goto" value="<?php echo $goto ?>">                    <div class="block_rm">                        <div class="group-from column-2">                            <input type="hidden" class="form_id" name="form_id" value="<?php echo $id ?>">                            <input type="hidden" class="name" name="product" value="<?php echo $name ?>">                            <input type="hidden" class="price" name="price" value="<?php echo $price ?>">                            <input type="hidden" name="infusion_tags" value="<?php echo $infusion_tags?>">                            <input type="hidden" class="price" name="saleprice" value="<?php echo $saleprice ?>">                            <input type="hidden" class="commission" name="commission" value="<?php echo $commission ?>">                            <div class="panel-default">                                <div class="block-rm">                                    <?php                                         echo FormOrderView::commission_earning_view($id,$comission_earning);                                     ?>                                    <div class="rm-form-group">                                        <input  required type="text" name="fullname" value="" placeholder="*Họ và tên:" class="rm-form-control fullname_rm ma-15">                                    </div>                                    <div class="rm-form-group" <?php if($show_check[0]=='0') echo 'style="display:none;"';?> >                                        <input type="email" name="email" <?php if($required_check[0]=='1') echo "required";?> value="" placeholder="*E-Mail:" class="rm-form-control email_rm ma-15">                                    </div>                                    <div class="rm-form-group" <?php if($show_check[1]=='0') echo 'style="display:none;"';?> >                                        <input type="number" name="phone" value="" <?php if($required_check[1]=='1') echo " required"; ?> placeholder="Số điện thoại:" class="rm-form-control email_rm ma-15">                                    </div>                                    <div class="rm-form-group" <?php if($show_check[2]=='0') echo 'style="display:none;"';?> >                                        <input type="text" name="address" <?php if($required_check[2]=='1') echo " required";?> value="" placeholder="*Địa chỉ:" class="rm-form-control email_rm ma-15">                                    </div>                                    <div class="rm-form-group" <?php if($show_check[3]=='0') echo 'style="display:none;"';?> >                                        <input  type="number" name="quantity" <?php if($required_check[3]=='1') echo " required";?> value="1" placeholder="Số lượng" min="1"  class="rm-form-control ma-15">                                    </div>                                    <div class="rm-form-group" <?php if($show_check[4]=='0') echo 'style="display:none;"';?> >                                        <input  type="text" name="discount" <?php if($required_check[4]=='1') echo " required";?> value="" placeholder="Mã giảm giá (nếu có):" class="rm-form-control">                                    </div>                                    <?php                                          $meta_data=json_decode($meta_data);                                        if(is_array($meta_data)){                                            foreach ($meta_data as $key => $value) {                                                 if($value->type=="meta_textbox"){  ?>                                                    <div class="rm-form-group" <?php if($value->show!='1') echo 'style="display:none;"';?> >                                                        <input type="hidden" name="meta_label" value="<?php echo $value->name; ?>">                                                        <input class="rm-form-control" type="text" name="meta_value" placeholder="<?php echo $value->name; ?>" <?php if($value->required=='1') echo " required"; ?>  value="<?php echo $value->value; ?>" >                                                    </div>                                        <?php   }                                                if($value->type=="meta_number"){  ?>                                                    <div class="rm-form-group" <?php if($value->show!='1') echo 'style="display:none;"';?> >                                                        <input type="hidden" name="meta_label" value="<?php echo $value->name; ?>" >                                                        <input class="rm-form-control" type="number" name="meta_value" placeholder="<?php echo $value->name; ?>" <?php if($value->required=='1') echo "required"; ?> value="<?php echo $value->value; ?>" >                                                    </div>                                        <?php   }                                                if($value->type=="meta_textarea"){  ?>                                                    <div class="rm-form-group txt-note" <?php if($value->show!='1') echo 'style="display:none;"';?> >                                                        <input type="hidden" name="meta_label" value="<?php echo $value->name; ?>" >                                                        <textarea type="text" name="meta_value" placeholder="<?php echo $value->name; ?>" class="rm-form-control note_rm ma-15" <?php if($value->required=='1') echo "required"; ?> value="<?php echo $value->value; ?>" ></textarea>                                                    </div>                                        <?php   }                                                if($value->type=="meta_radio"){  ?>                                                    <div class="rm-form-group" <?php if($value->show!='1') echo 'style="display:none;"';?> >                                                        <input type="hidden" name="meta_label" value="<?php echo $value->name; ?>" >                                                    <?php                                                        $options=explode(',',$value->value);                                                        echo $value->name.' : ';                                                         foreach ($options as $key_option => $value_option) {                                                            ?>                                                        <input class="form-control" type="radio" name="meta_value" value="<?php echo $value_option; ?>" <?php if($key_option==0) echo"checked"; ?> >                                                                                                           <?php                                                             echo $value_option.'&nbsp &nbsp';                                                         }                                                    ?>                                                    </div>                                        <?php   }                                                if($value->type=="meta_checkbox"){  ?>                                                    <div class="rm-form-group" <?php if($value->show!='1') echo 'style="display:none;"';?> >                                                        <input type="hidden" name="meta_label" value="<?php echo $value->name; ?>" >                                                        <input type="hidden" name="meta_value" value="" >                                                    <?php                                                        $options=explode(',',$value->value);                                                        echo $value->name.' : ';                                                         foreach ($options as $key_option => $value_option) {                                                            ?>                                                        <input type="checkbox" class="checked" name="option_<?php echo $key; ?>" value="<?php echo $value_option; ?>" style="width: 30px;">                                                    <?php                                                             echo $value_option;                                                         }                                                    ?>                                                                                                       </div>                                        <?php   }                                                if($value->type=="meta_select"){  ?>                                                    <div class="rm-form-group" <?php if($value->show!='1') echo 'style="display:none;"';?> >                                                        <input type="hidden" name="meta_label" value="<?php echo $value->name; ?>" >                                                    <?php                                                        $options=explode(',',$value->value);                                                        echo $value->name.' : ';?>                                                         <select class="rm-form-group" name="meta_value">                                                    <?php                                                         foreach ($options as $key_option => $value_option) {                                                            ?>                                                        <option value="<?php echo $value_option; ?>"> <?php echo $value_option; ?> </option>                                                    <?php                                                             echo $value_option.'  ';                                                         }                                                    ?>                                                        </select>                                                    </div>                                        <?php   }                                        }                                    }                                ?>                                </div>                                <script type="text/javascript">                                    var RmsOrderForm={};                                    (function (e,$){                                        $('.checked').on('change', function() {                                            var checked = '';                                            $(this).parents('.rm-form-group').find('.checked').each(function(){                                                if($(this).attr('checked')=='checked'){                                                    checked += $(this).val()+';';                                                }                                            });                                            $($(this).parents('.rm-form-group').find('[name="meta_value"]').get(0)).val(checked);                                        });                                    })(RmsOrderForm,jQuery);                                </script>                            </div>                            <div class="order-btn">                                <input type="submit" name="purchase_rms" value="<?php echo $submit ?>" class="btn order-price order_btn" style="background-color: #<?php echo get_option('rms_color')?>!important;">                            </div>                        </div>                    </div>                </form>            </div>            <style>                .block_rm{padding: 10px}                .order-price{background-color: #52b400; color: #fff;font-weight: 700;}            </style>        <?php       return ob_get_clean();   }   static function commission_earning_view($id,$e){        // $e jusst mean $comission_earning        if($e){            $total_earning_of_aff = $e->cbs+$e->coov+$e->copg;            $html='                <div class="commission-modal" id="commission-modal-'.$id.'">                  <div class="commission-modal-content">                    <span class="commission-modal-close">&times;</span>                    <div class="commission-detail">                        <p>Với chính sách chia sẻ lợi nhuận từ chúng tôi, sau khi đơn hàng hoàn thành bạn sẽ nhận được các hoa hồng sau hoặc nhiều hơn thế nữa:                            <br>- Hoa hồng bán hàng: <b>'.number_format($e->cbs).' đ</b>                            <br>- Hoa hồng theo đơn giá: <b>'.number_format($e->coov).' đ</b>                            <br>- Hoa hồng doanh số: <b>'.number_format($e->copg).' đ</b>                            <br>Tổng cộng: <b>'.number_format($total_earning_of_aff).' đ</b>                        </p>                        <p><small>* Lưu ý: Đây là mức tối thiểu bạn nhận được cho sản phẩm này, giá trị hiện tại chưa bao gồm chính sách hoa hồng mạng lưới và các hoa hồng đặc biệt khác (nếu có).</small></p>                        <p>Chia sẻ ngay để có thể nhận được <b>'.number_format($total_earning_of_aff).' đ</b> cho mỗi đơn hàng thành công.</p>                    </div>                    <span>                        <input type="button" class="btn btn-share-now" value="Chia sẻ ngay">                    </span>                  </div>                </div>                <div class="rm-form-group">                    <input type="button" value="+ '.number_format($total_earning_of_aff).' đ"  class="rm-form-control ma-15 btn show-commission-modal" readonly title="Click để xem chi tiết" data-modalid="'.$id.'" style="background:#4e963f;">                </div>            ';            return $html;        }else{            return '';        }   }}